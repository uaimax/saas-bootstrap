---
description: "Regras globais para todo o reposit√≥rio SaaS Bootstrap"
globs:
  - "**/*"
alwaysApply: true
---

# Regras Globais ‚Äî SaaS Bootstrap

@CLAUDE.md
@AGENTS.md

## Contexto do Projeto

- **Stack**: Django 5 + DRF
- **Arquitetura**: Multi-tenancy por `tenant_id`
- **Fase atual**: Funda√ß√£o (Fase 1)

## Regras Universais

### ALWAYS

1. **Type hints** em todas as fun√ß√µes Python
2. **Docstrings** em classes e fun√ß√µes p√∫blicas
3. **Arquivos < 300 linhas**
4. **Testes junto ao app** em `tests/`
5. **APIs com prefixo `/api/`**
6. **Vari√°veis de ambiente** para configura√ß√µes sens√≠veis

### NEVER

1. **NUNCA modificar migrations existentes**
2. **NUNCA alterar models cr√≠ticos** (User, Tenant, TenantModel) sem autoriza√ß√£o
3. **NUNCA modificar middleware** de tenant
4. **NUNCA hardcodar** URLs, secrets ou configura√ß√µes de deploy
5. **NUNCA ignorar** zonas de prote√ß√£o

## Zonas de Prote√ß√£o

üî¥ **ZONA VERMELHA** ‚Äî NUNCA TOCAR:
- `backend/apps/accounts/migrations/`
- `backend/apps/accounts/models.py`
- `backend/apps/core/models.py`
- `backend/apps/core/middleware.py`
- `backend/core/settings/prod.py`

üü° **ZONA AMARELA** ‚Äî CUIDADO:
- `backend/core/settings/base.py`
- `backend/core/urls.py`
- Scripts shell (`*.sh`)

## Comandos √öteis

```bash
./dev-start.sh    # Inicia desenvolvimento
./run-tests.sh    # Executa testes
make migrate      # Aplica migrations
```

## Refer√™ncias

- @docs/context/PROTECTED_AREAS.md
- @docs/ARCHITECTURE.md
